PROGRAM TestProgram2 IS INSTRUCTION InfectFirst IS IF next-is-enemy THEN infect ELSE turnleft IF next-is-enemy THEN infect ELSE turnleft IF next-is-enemy THEN infect ELSE turnleft IF next-is-enemy THEN infect ELSE LookForFriend END IF END IF END IF END IF END InfectFirst INSTRUCTION LookForFriend IS IF next-is-friend THEN HandleFriend ELSE turnright IF next-is-not-enemy THEN IF next-is-friend THEN HandleFriend ELSE turnright IF next-is-not-enemy THEN IF next-is-friend THEN HandleFriend ELSE turnright IF next-is-not-enemy THEN IF next-is-friend THEN HandleFriend ELSE LookForWall END IF END IF END IF END IF END IF END IF END IF END LookForFriend INSTRUCTION HandleFriend IS IF random THEN turnleft ELSE turnright END IF IF random THEN IF next-is-empty THEN move END IF END IF END HandleFriend INSTRUCTION LookForWall IS IF next-is-wall THEN HandleWall ELSE move END IF END LookForWall INSTRUCTION HandleWall IS turnleft WHILE true DO WHILE next-is-enemy DO infect END WHILE turnleft WHILE next-is-enemy DO infect END WHILE turnleft WHILE next-is-enemy DO infect END WHILE turnright WHILE next-is-enemy DO infect END WHILE turnright END WHILE END HandleWall BEGIN WHILE true DO InfectFirst END WHILE END TestProgram2
